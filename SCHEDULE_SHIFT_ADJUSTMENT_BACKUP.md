# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ª–æ–≥–∏–∫–∏ —Å–¥–≤–∏–≥–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

## –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 22.10.2025

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getAdjustedShiftForDisplay()`
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `ScheduleFragment.kt`, —Å—Ç—Ä–æ–∫–∏ 163-201

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–¥–≤–∏–≥ –º–µ—Å—è—Ü–∞ —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å–µ –¥–Ω–∏ –ø–æ–º–µ—â–∞–ª–∏—Å—å –≤ 36 —è—á–µ–µ–∫, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º —Å–º–µ–Ω.

**–õ–æ–≥–∏–∫–∞:**
- –í—ã—á–∏—Å–ª—è–µ—Ç `patternValue = calculatedShift % 10` (–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –±–∞–∑–æ–≤–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é: `maxSafePosition = 36 - daysInMonth`
- –ò—â–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ 36 —è—á–µ–µ–∫
- –°–¥–≤–∏–≥–∞–µ—Ç –Ω–∞ -10, -20 –∏–ª–∏ -30, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### 2. –ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `generateScheduleData()`
**–°—Ç—Ä–æ–∫–∏ 183-187**

**–°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞):**
```kotlin
val limitedShift = shiftCount % 12
```

**–ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê:**
```kotlin
val adjustedShift = getAdjustedShiftForDisplay(currentYear, monthIndex, daysInMonths[monthIndex])
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω –∞–¥–∞–ø—Ç–µ—Ä `ScheduleCalendarAdapter`
**–°—Ç—Ä–æ–∫–∏ 149-155, 998-1003, 1053-1056, 1060-1067, 1176-1187**

- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞: `getAdjustedShiftFunction: (Int, Int, Int) -> Int`
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `setupRecyclerView()` —á–µ—Ä–µ–∑ `::getAdjustedShiftForDisplay`
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `ViewHolder` —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `bind()`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ `createDayView()`
**–°—Ç—Ä–æ–∫–∏ 1242-1257**

**–°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞):**
```kotlin
val monthShift = calculateMonthShiftFunc!!(row.year, selectedMonthIndex)
val limitedShift = monthShift % 12
```

**–ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê:**
```kotlin
val adjustedShift = getAdjustedShiftFunc!!(row.year, selectedMonthIndex, daysInMonths[selectedMonthIndex])
val targetColumn = adjustedShift + (selectedDayInMonth - 1)
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `scrollToToday()`
**–°—Ç—Ä–æ–∫–∏ 938-965**

**–°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞):**
```kotlin
val monthShift = calculateMonthShift(currentYear, todayMonth)
val limitedShift = monthShift % 12
```

**–ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê:**
```kotlin
val adjustedShift = getAdjustedShiftForDisplay(currentYear, todayMonth, daysInMonths[todayMonth])
val todayPosition = adjustedShift + (todayDay - 1)
```

---

## üîô –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É)

1. –í `generateScheduleData()` (—Å—Ç—Ä–æ–∫–∞ 183-187):
   ```kotlin
   // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
   // val adjustedShift = getAdjustedShiftForDisplay(currentYear, monthIndex, daysInMonths[monthIndex])
   
   // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
   val limitedShift = shiftCount % 12
   
   // –ò –∑–∞–º–µ–Ω–∏—Ç—å adjustedShift –Ω–∞ limitedShift –≤ —Å—Ç—Ä–æ–∫–µ 193
   ```

2. –í `createDayView()` (—Å—Ç—Ä–æ–∫–∏ 1242-1257):
   ```kotlin
   // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
   val monthShift = calculateMonthShiftFunc!!(row.year, selectedMonthIndex)
   val limitedShift = monthShift % 12
   val targetColumn = limitedShift + (selectedDayInMonth - 1)
   
   // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Å getAdjustedShiftFunc
   ```

3. –í `scrollToToday()` (—Å—Ç—Ä–æ–∫–∏ 944-954):
   ```kotlin
   // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
   val monthShift = calculateMonthShift(currentYear, todayMonth)
   val limitedShift = monthShift % 12
   val todayPosition = limitedShift + (todayDay - 1)
   
   // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Å getAdjustedShiftForDisplay
   ```

4. –£–¥–∞–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `getAdjustedShiftFunction` –∏–∑:
   - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ `ScheduleCalendarAdapter`
   - –í—ã–∑–æ–≤–∞ –≤ `setupRecyclerView()`
   - –ú–µ—Ç–æ–¥–∞ `bind()` –≤ `ViewHolder`
   - –ü–æ–ª—è `getAdjustedShiftFunc` –≤ `ViewHolder`

5. –£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getAdjustedShiftForDisplay()` (—Å—Ç—Ä–æ–∫–∏ 163-201)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ git (–µ—Å–ª–∏ –±—ã–ª –∫–æ–º–º–∏—Ç –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

```bash
git checkout HEAD~1 -- app/src/main/java/com/example/vkbookandroid/ScheduleFragment.kt
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏:

- **–î–ª—è 31-–¥–Ω–µ–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–¥–≤–∏–≥ = 5 –ø–æ–∑–∏—Ü–∏–π
- **–î–ª—è 30-–¥–Ω–µ–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–¥–≤–∏–≥ = 6 –ø–æ–∑–∏—Ü–∏–π
- **–î–ª—è 29-–¥–Ω–µ–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–¥–≤–∏–≥ = 7 –ø–æ–∑–∏—Ü–∏–π
- **–î–ª—è 28-–¥–Ω–µ–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–¥–≤–∏–≥ = 8 –ø–æ–∑–∏—Ü–∏–π

–í—Å–µ –º–µ—Å—è—Ü—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ 36 —è—á–µ–µ–∫, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º —Å–º–µ–Ω (–º–æ–¥—É–ª—å 10).

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 2025 –≥–æ–¥: –≤—Å–µ –º–µ—Å—è—Ü—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ 36 —è—á–µ–µ–∫
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 2026-2030 –≥–æ–¥—ã: –≤—Å–µ –º–µ—Å—è—Ü—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 2020-2024 –≥–æ–¥—ã (–Ω–∞–∑–∞–¥): –≤—Å–µ –º–µ—Å—è—Ü—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å—Å—è
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å—Ç–æ–ª–±—Ü–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–µ–Ω—å
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –∫ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç–µ
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω —Å–º–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–Ω—è–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ `calculateMonthShift()` **–ù–ï –ò–ó–ú–ï–ù–ï–ù–ê** - –æ–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–∑–º–µ–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ **–≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞** (—Å–¥–≤–∏–≥ –≤ UI)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ
- –†–µ–∫—É—Ä—Å–∏—è –¥–ª—è –ø—Ä–æ—à–ª—ã—Ö/–±—É–¥—É—â–∏—Ö –≥–æ–¥–æ–≤ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞






