# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞

## –î–∞—Ç–∞: 22.10.2025

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê

–ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω —Å–¥–≤–∏–≥–∞–ª—Å—è **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û**! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–≤–µ—Ä–Ω—ã–π —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥.

### ‚ùå –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∏ 267-273):

```kotlin
val shiftedPattern = if (yearShiftOffset == 0) {
    pattern.toList()
} else {
    // –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥!
    val actualOffset = (yearShiftOffset % 36 + 36) % 36
    pattern.takeLast(actualOffset) + pattern.dropLast(actualOffset)
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `pattern.takeLast(actualOffset)` - –±–µ—Ä–µ—Ç –ü–û–°–õ–ï–î–ù–ò–ï —ç–ª–µ–º–µ–Ω—Ç—ã
- `+ pattern.dropLast(actualOffset)` - –¥–æ–±–∞–≤–ª—è–µ—Ç –í–°–ï –ö–†–û–ú–ï –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
- –≠—Ç–æ —Å–¥–≤–∏–≥ **–í–õ–ï–í–û**, –∞ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è!

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê

–ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **36 —è—á–µ–µ–∫, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `januaryCalculatedShift`** –≤ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–º 36-—ç–ª–µ–º–µ–Ω—Ç–Ω–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ!

### –ü—Ä–∏–º–µ—Ä:

**2025 –≥–æ–¥:**
- `januaryCalculatedShift = 1` (—è–Ω–≤–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 1 –≤ –±–∞–∑–æ–≤–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ)
- `januaryAdjustedShift = 1` (–ø–æ–º–µ—â–∞–µ—Ç—Å—è: 1 + 31 = 32 < 36)
- `yearShiftOffset = 1 - 1 = 0`
- –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **–ø–æ–∑–∏—Ü–∏–∏ 0** (–±–µ–∑ —Å–¥–≤–∏–≥–∞)

**2026 –≥–æ–¥:**
- `januaryCalculatedShift = 6` (—è–Ω–≤–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 6 –≤ –±–∞–∑–æ–≤–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ)
- `januaryAdjustedShift = ?` (–ø—Ä–æ–≤–µ—Ä—è–µ–º: 6 + 31 = 37 > 36, –ù–ï –ø–æ–º–µ—â–∞–µ—Ç—Å—è!)
- `adjustedShift = 6 - 10 = -4` (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ, –∑–Ω–∞—á–∏—Ç 0)
- `yearShiftOffset = 6 - 0 = 6`
- –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **–ø–æ–∑–∏—Ü–∏–∏ 6** –≤ 36-—ç–ª–µ–º–µ–Ω—Ç–Ω–æ–º —Ü–∏–∫–ª–µ!

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (—Å—Ç—Ä–æ–∫–∏ 255-293):

```kotlin
// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ —Å–º–µ–Ω - –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–ù–´–ï —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
val januaryCalculatedShift = calculateMonthShift(currentYear, 0)
val januaryAdjustedShift = getAdjustedShiftForDisplay(currentYear, 0, daysInMonths[0])
val yearShiftOffset = januaryCalculatedShift - januaryAdjustedShift

Log.d(TAG, "‚ïê‚ïê‚ïê –ì–æ–¥ $currentYear ‚ïê‚ïê‚ïê")
Log.d(TAG, "–Ø–Ω–≤–∞—Ä—å: calculated=$januaryCalculatedShift, adjusted=$januaryAdjustedShift")
Log.d(TAG, "–°–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞: $yearShiftOffset (–≥—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ $januaryCalculatedShift)")

repeat(5) { shiftIndex ->
    val pattern = shiftPatterns[shiftIndex]
    
    val shiftedPattern = if (yearShiftOffset == 0) {
        // –°–¥–≤–∏–≥–∞ –Ω–µ—Ç - –≥—Ä–∞—Ñ–∏–∫ –∫–∞–∫ –µ—Å—Ç—å
        pattern.toList()
    } else {
        // –ë–µ—Ä–µ–º 36 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ januaryCalculatedShift
        // –°–æ–∑–¥–∞–µ–º —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω (–¥—É–±–ª–∏—Ä—É–µ–º –¥–ª—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
        val extendedPattern = pattern.toList() + pattern.toList()  // 72 —ç–ª–µ–º–µ–Ω—Ç–∞
        val startPosition = januaryCalculatedShift % 36
        extendedPattern.subList(startPosition, startPosition + 36)
    }
    
    Log.d(TAG, "–°–º–µ–Ω–∞ ${shiftIndex + 1}: –Ω–∞—á–∞–ª–æ –≥—Ä–∞—Ñ–∏–∫–∞ = ${shiftedPattern.take(5)}")
    
    scheduleData.add(
        ScheduleRow(
            shiftNames[shiftIndex],
            shiftedPattern,
            isMonthRow = false,
            shiftIndex = shiftIndex
        )
    )
}
```

---

## üßÆ –ú–ê–¢–ï–ú–ê–¢–ò–ö–ê

### –ü—Ä–∏–º–µ—Ä: –Ø–Ω–≤–∞—Ä—å 2026

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `januaryCalculatedShift = 6` (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ)
- –ú–µ—Å—è—Ü = 31 –¥–µ–Ω—å
- 6 + 31 = 37 > 36 ‚ùå –ù–ï –ü–û–ú–ï–©–ê–ï–¢–°–Ø!

**–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞:**
- `adjustedShift = 6` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º: 6 + 31 > 36 ‚ùå
- –ò—â–µ–º: 6 - 10 = -4 < 0 ‚ùå
- –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback: `adjustedShift = 0` ‚úÖ

**–°–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞:**
- `yearShiftOffset = 6 - 0 = 6`
- –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **–ø–æ–∑–∏—Ü–∏–∏ 6**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
–ü–ê–¢–¢–ï–†–ù –°–ú–ï–ù–´ 1 (36 —ç–ª–µ–º–µ–Ω—Ç–æ–≤):
–ü–æ–∑–∏—Ü–∏—è:  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 ...
–ó–Ω–∞—á–µ–Ω–∏–µ: 3  2  4  1 –í—Ö  4  1  3  2 –í—Ö  3  2  4  1 –í—Ö  4 ...

–ì–†–ê–§–ò–ö –î–õ–Ø 2026 (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 6):
–ü–æ–∑–∏—Ü–∏—è –≤ –æ–∫–Ω–µ: 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 ...
–ó–Ω–∞—á–µ–Ω–∏–µ:       1  3  2 –í—Ö  3  2  4  1 –í—Ö  4  1  3  2 –í—Ö  3  2 ...
                ‚Üë –≠—Ç–æ –ø–æ–∑–∏—Ü–∏—è 6 –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞

–ö–ê–õ–ï–ù–î–ê–†–¨ (—è–Ω–≤–∞—Ä—å 2026, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 0):
–ü–æ–∑–∏—Ü–∏—è –≤ –æ–∫–Ω–µ: 0  1  2  3  4  5  6  7  8  9 10 ...
–î–µ–Ω—å –º–µ—Å—è—Ü–∞:    1  2  3  4  5  6  7  8  9 10 11 ...

–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï:
–î–µ–Ω—å 1 —è–Ω–≤–∞—Ä—è = –ø–æ–∑–∏—Ü–∏—è 0 –≤ –æ–∫–Ω–µ = –∑–Ω–∞—á–µ–Ω–∏–µ "1" –≤ –≥—Ä–∞—Ñ–∏–∫–µ ‚úÖ
```

---

## üìä –ü–†–û–í–ï–†–ö–ê –î–õ–Ø –†–ê–ó–ù–´–• –ì–û–î–û–í

### 2025 –≥–æ–¥:

```
januaryCalculatedShift = 1
januaryAdjustedShift = 1 (–ø–æ–º–µ—â–∞–µ—Ç—Å—è: 1 + 31 = 32 < 36)
yearShiftOffset = 0

–ì—Ä–∞—Ñ–∏–∫: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (–±–µ–∑ —Å–¥–≤–∏–≥–∞)
–ö–∞–ª–µ–Ω–¥–∞—Ä—å: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 1
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!
```

### 2026 –≥–æ–¥:

```
januaryCalculatedShift = 6
januaryAdjustedShift = 0 (6 + 31 > 36, –∏—Å–ø–æ–ª—å–∑—É–µ–º 0)
yearShiftOffset = 6

–ì—Ä–∞—Ñ–∏–∫: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 6 (–∑–Ω–∞—á–µ–Ω–∏–µ "1")
–ö–∞–ª–µ–Ω–¥–∞—Ä—å: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 0
‚úÖ –î–µ–Ω—å 1 —è–Ω–≤–∞—Ä—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º "1" –≤ –≥—Ä–∞—Ñ–∏–∫–µ!
```

### 2024 –≥–æ–¥:

```
januaryCalculatedShift = 5 (–∏–∑ —Ä–µ–∫—É—Ä—Å–∏–∏ –Ω–∞–∑–∞–¥)
januaryAdjustedShift = 5 (–ø–æ–º–µ—â–∞–µ—Ç—Å—è: 5 + 31 = 36 ‚â§ 36)
yearShiftOffset = 0

–ì—Ä–∞—Ñ–∏–∫: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π, –Ω–æ —Å –ø—É—Å—Ç—ã–º–∏ —è—á–µ–π–∫–∞–º–∏ —Å–ª–µ–≤–∞
–ö–∞–ª–µ–Ω–¥–∞—Ä—å: –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 5
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!
```

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### –í –ª–æ–≥–∞—Ö (adb logcat | grep "ScheduleFragment"):

```
‚ïê‚ïê‚ïê –ì–æ–¥ 2025 ‚ïê‚ïê‚ïê
–Ø–Ω–≤–∞—Ä—å: calculated=1, adjusted=1
–°–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞: 0 (–≥—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 1)
–°–º–µ–Ω–∞ 1: –Ω–∞—á–∞–ª–æ –≥—Ä–∞—Ñ–∏–∫–∞ = [3, 2, 4, 1, –í—Ö]

‚ïê‚ïê‚ïê –ì–æ–¥ 2026 ‚ïê‚ïê‚ïê
–Ø–Ω–≤–∞—Ä—å: calculated=6, adjusted=0
–°–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞: 6 (–≥—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 6)
–°–º–µ–Ω–∞ 1: –Ω–∞—á–∞–ª–æ –≥—Ä–∞—Ñ–∏–∫–∞ = [1, 3, 2, –í—Ö, 3]
```

### –í–∏–∑—É–∞–ª—å–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **2025 –≥–æ–¥**:
   - –Ø–Ω–≤–∞—Ä—å: 1-–µ —á–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–ø—Ä–æ—Ç–∏–≤ "2" –≤ –≥—Ä–∞—Ñ–∏–∫–µ —Å–º–µ–Ω—ã 1 ‚úÖ
   
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ **2026 –≥–æ–¥**:
   - –ì—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω **–°–î–í–ò–ù–£–¢–¨–°–Ø** (–Ω–∞—á–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞)
   - –Ø–Ω–≤–∞—Ä—å: 1-–µ —á–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–ø—Ä–æ—Ç–∏–≤ "1" –≤ –≥—Ä–∞—Ñ–∏–∫–µ —Å–º–µ–Ω—ã 1 ‚úÖ
   - –í—Å–µ –¥–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ 36 —è—á–µ–µ–∫ ‚úÖ

3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ **2024 –≥–æ–¥**:
   - –ì—Ä–∞—Ñ–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å –ø—É—Å—Ç—ã–º–∏ —è—á–µ–π–∫–∞–º–∏ —Å–ª–µ–≤–∞
   - –Ø–Ω–≤–∞—Ä—å: 1-–µ —á–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫—É ‚úÖ

---

## üìù –ò–¢–û–ì–ò

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ **–î–≤–æ–π–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è** - —É–±—Ä–∞–Ω–∞
2. ‚úÖ **–°–º–µ—à–∏–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
3. ‚úÖ **–û—à–∏–±–∫–∞ –≤ `getAdjustedShiftForDisplay`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
4. ‚úÖ **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥** - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:

- **–ö–∞–ª–µ–Ω–¥–∞—Ä—å:** –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `adjustedShift` (0-5 –¥–ª—è 31-–¥–Ω–µ–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤)
- **–ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω:** –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `calculatedShift` –≤ 36-—ç–ª–µ–º–µ–Ω—Ç–Ω–æ–º —Ü–∏–∫–ª–µ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –î–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞—á–∞–ª–æ –≥—Ä–∞—Ñ–∏–∫–∞

### –§–æ—Ä–º—É–ª–∞:

```kotlin
–ì—Ä–∞—Ñ–∏–∫ –¥–ª—è –≥–æ–¥–∞ = 36 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–∞—Ç—Ç–µ—Ä–Ω–∞, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ januaryCalculatedShift
```

---

## ‚úÖ –ì–û–¢–û–í–û!

**APK:** `app/build/outputs/apk/debug/app-debug.apk`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ BUILD SUCCESSFUL

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω **—Å–¥–≤–∏–≥–∞–µ—Ç—Å—è** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥–æ–¥–æ–≤
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å **–ø–æ–º–µ—â–∞–µ—Ç—Å—è** –≤ 36 —è—á–µ–µ–∫
- –î–Ω–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è **—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç** –≥—Ä–∞—Ñ–∏–∫—É —Å–º–µ–Ω
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≥–æ–¥–∞–º–∏ **—Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

üéâ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–ê–í–ï–†–®–ï–ù–´!**






