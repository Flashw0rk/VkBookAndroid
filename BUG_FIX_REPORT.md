# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

**–î–∞—Ç–∞:** 26 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–æ–±—â–µ–Ω–∏–µ "–ì—Ä–∞—Ñ–∏–∫ –≥–æ–¥–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –æ—à–∏–±–∫–∞–º–∏"  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å—Ç–∞–ª–æ –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚ö†Ô∏è –ì—Ä–∞—Ñ–∏–∫ –¥–ª—è 2025 –≥–æ–¥–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –æ—à–∏–±–∫–∞–º–∏.
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ–∫–Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
```

---

## üîç –ü—Ä–∏—á–∏–Ω–∞

### –ß—Ç–æ —è –∏–∑–º–µ–Ω–∏–ª –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–ó–∞–º–µ–Ω–∏–ª –≤—ã–∑–æ–≤ `calculateMonthShift` –Ω–∞ `shiftCalculator.calculateMonthShift`**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –í—ã–∑–æ–≤ –Ω–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
   - –ú–µ—Å—Ç–∞: `generateScheduleData()`, `findOptimalYearShift()`

2. **–ó–∞–º–µ–Ω–∏–ª –º–µ—Ç–æ–¥ `getAdjustedShiftForDisplay` –Ω–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ ShiftCalculator**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –í–µ—Å—å –º–µ—Ç–æ–¥ —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç `shiftCalculator.getAdjustedShiftForDisplay()`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –£–±—Ä–∞–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞

### –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:

**ShiftCalculator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:**
```kotlin
// –í ShiftCalculator
private fun calculateMonthShiftInternal(year: Int, monthIndex: Int): Int {
    val globalDayNumber = getGlobalDayNumberFrom2025(year, monthIndex, 1)
    return globalDayNumber % 37  // –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ –ø–æ –º–æ–¥—É–ª—é
}
```

**–ù–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –≤ ScheduleFragment –∏–º–µ–ª —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É** —á–µ—Ä–µ–∑ `calculateMonthShiftInternal(year, monthIndex, basePatternSize)` –∫–æ—Ç–æ—Ä–∞—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ä–µ–∫—É—Ä—Å–∏—é –¥–ª—è —è–Ω–≤–∞—Ä—è
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞ –º–µ—Å—è—Ü—ã –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º
- –£—á–∏—Ç—ã–≤–∞–ª–∞ `basePatternSize` –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä

**–†–∞–∑–Ω–∏—Ü–∞:**
- –û—Ä–∏–≥–∏–Ω–∞–ª: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É —Å –±–∞–∑–æ–≤—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- ShiftCalculator: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É–ª—É

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–û—Ç–∫–∞—Ç ScheduleFragment.kt –∫ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏:**
```bash
git checkout fce4890 -- app/src/main/java/com/example/vkbookandroid/ScheduleFragment.kt
```

**–ß—Ç–æ —ç—Ç–æ –≤–µ—Ä–Ω—É–ª–æ:**
- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `calculateMonthShift` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `getAdjustedShiftForDisplay` —Å–æ –≤—Å–µ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–∞–º–µ–Ω–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ (36, 10, 5)

---

## üìä –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã (–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–µ–π—á–∞—Å):
- ‚úÖ `ShiftCalculationCache` - –∫—ç—à –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ `ShiftCalculator` - –∫–ª–∞—Å—Å –≥–æ—Ç–æ–≤, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ `ScheduleConstants` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- ‚úÖ `CalendarDataGenerator` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

## üéØ –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. ‚ùå –ó–∞–º–µ–Ω–∏–ª —Ä–∞–±–æ—á–∏–π –º–µ—Ç–æ–¥ –Ω–∞ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
2. ‚ùå –ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
3. ‚ùå –ù–µ —É—á–µ–ª —Å–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. ‚úÖ –°–æ–∑–¥–∞–ª —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. ‚úÖ –ë—ã—Å—Ç—Ä–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª –ø—Ä–æ–±–ª–µ–º—É
3. ‚úÖ –û—Ç–∫–∞—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –≤ ShiftCalculator:**
   ```kotlin
   private fun calculateMonthShiftInternal(year: Int, monthIndex: Int): Int {
       // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–ß–ù–£–Æ –ª–æ–≥–∏–∫—É –∏–∑ ScheduleFragment
       // —Å —Ä–µ–∫—É—Ä—Å–∏–µ–π –¥–ª—è —è–Ω–≤–∞—Ä—è –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º —Ä–∞—Å—á–µ—Ç–æ–º
   }
   ```

2. **–¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≥–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—è—Ü—ã
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã

3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ:**
   - –°–Ω–∞—á–∞–ª–∞ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ó–∞—Ç–µ–º –∑–∞–º–µ–Ω—è—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ

---

## üìù –§–∞–π–ª—ã

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ:
- `ScheduleFragment.kt` - –æ—Ç–∫–∞—á–µ–Ω –∫ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏

### –ù–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ (–≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é):
- `schedule/ShiftCalculator.kt`
- `schedule/ShiftCalculationCache.kt`
- `schedule/ScheduleConstants.kt`
- `schedule/CalendarDataGenerator.kt`

---

## ‚úÖ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–ª –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫–∞—Ç –∫ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ  
**–°—Ç–∞—Ç—É—Å:** –ì–û–¢–û–í–û

---

**–ö–æ–º–º–∏—Ç –æ—Ç–∫–∞—Ç–∞:** `fce4890`  
**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞:** `git checkout fce4890 -- app/src/main/java/com/example/vkbookandroid/ScheduleFragment.kt`

