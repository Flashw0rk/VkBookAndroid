# üêõ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ñ–µ–≤—Ä–∞–ª–µ–º –∏ –¥—Ä—É–≥–∏–º–∏ –º–µ—Å—è—Ü–∞–º–∏

## –î–∞—Ç–∞: 22.10.2025

---

## üéØ –ù–ê–ô–î–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–§–µ–≤—Ä–∞–ª—å –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Å—è—Ü—ã** –∏–º–µ–ª–∏ **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–∞—Å—á–µ—Ç `adjustedShift`**, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ **–≥—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω —Å–¥–≤–∏–≥–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** (–Ω–∞ –æ—Å–Ω–æ–≤–µ —è–Ω–≤–∞—Ä—è)!

### ‚ùå –û–®–ò–ë–û–ß–ù–ê–Ø –õ–û–ì–ò–ö–ê:

```kotlin
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞ –û–¢–î–ï–õ–¨–ù–û:
months.forEachIndexed { monthIndex, monthName ->
    val shiftCount = calculateMonthShift(currentYear, monthIndex)
    
    // ‚ùå –ö–ê–ñ–î–´–ô –ú–ï–°–Ø–¶ –≤—ã—á–∏—Å–ª—è–µ—Ç –°–í–û–ô adjustedShift!
    val adjustedShift = getAdjustedShiftForDisplay(currentYear, monthIndex, daysInMonths[monthIndex])
    
    // –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ adjustedShift
}

// –ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó:
val januaryCalculatedShift = calculateMonthShift(currentYear, 0)
val januaryAdjustedShift = getAdjustedShiftForDisplay(currentYear, 0, daysInMonths[0])
val yearShiftOffset = januaryCalculatedShift - januaryAdjustedShift

// –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ januaryCalculatedShift
```

### üî• –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

**2025 –≥–æ–¥:**

```
–Ø–ù–í–ê–†–¨:
  calculated = 1, adjusted = 1
  –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 1 ‚úÖ
  
–§–ï–í–†–ê–õ–¨:
  calculated = 2, adjusted = 2 (–°–í–û–ô –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–∞—Å—á–µ—Ç!)
  –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 2
  
–ì–†–ê–§–ò–ö –°–ú–ï–ù:
  –°–¥–≤–∏–Ω—É—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —è–Ω–≤–∞—Ä—è (yearShiftOffset = 0)
  –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 1
  
–†–ï–ó–£–õ–¨–¢–ê–¢:
  –Ø–Ω–≤–∞—Ä—å ‚úÖ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–ø–æ–∑–∏—Ü–∏—è 1)
  –§–µ–≤—Ä–∞–ª—å ‚ùå –ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ 2, –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ 1)
```

**2026 –≥–æ–¥:**

```
–Ø–ù–í–ê–†–¨:
  calculated = 6, adjusted = 0 (6 + 31 > 36, fallback)
  –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 0 ‚úÖ
  
–§–ï–í–†–ê–õ–¨:
  calculated = 2, adjusted = 2 (–°–í–û–ô –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–∞—Å—á–µ—Ç!)
  –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 2
  
–ì–†–ê–§–ò–ö –°–ú–ï–ù:
  –°–¥–≤–∏–Ω—É—Ç –Ω–∞ yearShiftOffset = 6
  –ì—Ä–∞—Ñ–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 6
  
–†–ï–ó–£–õ–¨–¢–ê–¢:
  –Ø–Ω–≤–∞—Ä—å ‚úÖ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–∫–∞–ª–µ–Ω–¥–∞—Ä—å 0, –≥—Ä–∞—Ñ–∏–∫ —Å –ø–æ–∑–∏—Ü–∏–∏ 6)
  –§–µ–≤—Ä–∞–ª—å ‚ùå –ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç (–∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ 2, –≥—Ä–∞—Ñ–∏–∫ —Å –ø–æ–∑–∏—Ü–∏–∏ 6)
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ï–¥–∏–Ω—ã–π yearShiftOffset –¥–ª—è –í–°–ï–• –º–µ—Å—è—Ü–µ–≤

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:

```kotlin
// –û–î–ò–ù –†–ê–ó –≤—ã—á–∏—Å–ª—è–µ–º —Å–¥–≤–∏–≥ –¥–ª—è –í–°–ï–ì–û –≥–æ–¥–∞:
val januaryCalculatedShift = calculateMonthShift(currentYear, 0)
val januaryAdjustedShift = getAdjustedShiftForDisplay(currentYear, 0, daysInMonths[0])
val yearShiftOffset = januaryCalculatedShift - januaryAdjustedShift

// –î–õ–Ø –ö–ê–ñ–î–û–ì–û –ú–ï–°–Ø–¶–ê –ø—Ä–∏–º–µ–Ω—è–µ–º –û–î–ò–ù–ê–ö–û–í–´–ô —Å–¥–≤–∏–≥:
months.forEachIndexed { monthIndex, monthName ->
    val calculatedShift = calculateMonthShift(currentYear, monthIndex)
    
    // ‚úÖ –ü–†–ò–ú–ï–ù–Ø–ï–ú –ï–î–ò–ù–´–ô yearShiftOffset!
    val adjustedShift = calculatedShift - yearShiftOffset
    
    // –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ adjustedShift
}

// –ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω –¢–ê–ö–ñ–ï —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ yearShiftOffset:
val shiftedPattern = extendedPattern.subList(januaryCalculatedShift % 36, ...)
```

---

## üßÆ –ú–ê–¢–ï–ú–ê–¢–ò–ö–ê

### 2025 –≥–æ–¥:

```
yearShiftOffset = 1 - 1 = 0

–Ø–ù–í–ê–†–¨:
  calculated = 1
  adjusted = 1 - 0 = 1 ‚úÖ

–§–ï–í–†–ê–õ–¨:
  calculated = 2
  adjusted = 2 - 0 = 2 ‚úÖ

–ú–ê–†–¢:
  calculated = 0
  adjusted = 0 - 0 = 0 ‚úÖ

–ì–†–ê–§–ò–ö:
  –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 1 (–±–µ–∑ —Å–¥–≤–∏–≥–∞)

–†–ï–ó–£–õ–¨–¢–ê–¢:
  –í—Å–µ –º–µ—Å—è—Ü—ã ‚úÖ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–º!
```

### 2026 –≥–æ–¥:

```
yearShiftOffset = 6 - 0 = 6

–Ø–ù–í–ê–†–¨:
  calculated = 6
  adjusted = 6 - 6 = 0 ‚úÖ

–§–ï–í–†–ê–õ–¨:
  calculated = 2  (—ç—Ç–æ 2 –≤ –±–∞–∑–æ–≤–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ 0-9)
  adjusted = 2 - 6 = -4
  
  ‚ùå –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ! –ù—É–∂–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:
  safeAdjusted = (-4 % 10 + 10) % 10 = 6 ‚úÖ

–ú–ê–†–¢:
  calculated = 7  (–ø—Ä–∏–º–µ—Ä–Ω–æ)
  adjusted = 7 - 6 = 1 ‚úÖ

–ì–†–ê–§–ò–ö:
  –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∑–∏—Ü–∏–∏ 6

–†–ï–ó–£–õ–¨–¢–ê–¢:
  –í—Å–µ –º–µ—Å—è—Ü—ã ‚úÖ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–º!
```

---

## üìù –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ö–û–î (—Å—Ç—Ä–æ–∫–∏ 222-270):

```kotlin
// –í–ê–ñ–ù–û: –í—ã—á–∏—Å–ª—è–µ–º –ï–î–ò–ù–´–ô —Å–¥–≤–∏–≥ –¥–ª—è –í–°–ï–ì–û –≥–æ–¥–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —è–Ω–≤–∞—Ä—è)
val januaryCalculatedShift = calculateMonthShift(currentYear, 0)
val januaryAdjustedShift = getAdjustedShiftForDisplay(currentYear, 0, daysInMonths[0])
val yearShiftOffset = januaryCalculatedShift - januaryAdjustedShift

Log.d(TAG, "‚ïê‚ïê‚ïê –ì–æ–¥ $currentYear - –†–∞—Å—á–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è ‚ïê‚ïê‚ïê")
Log.d(TAG, "–Ø–Ω–≤–∞—Ä—å: calculated=$januaryCalculatedShift, adjusted=$januaryAdjustedShift")
Log.d(TAG, "–°–¥–≤–∏–≥ –≥–æ–¥–∞ (yearShiftOffset): $yearShiftOffset")

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ –º–µ—Å—è—Ü–µ–≤
months.forEachIndexed { monthIndex, monthName ->
    val days = (1..daysInMonths[monthIndex]).toList()
    
    val calculatedShift = calculateMonthShift(currentYear, monthIndex)
    
    // –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê: –ü—Ä–∏–º–µ–Ω—è–µ–º –ï–î–ò–ù–´–ô yearShiftOffset!
    val adjustedShift = calculatedShift - yearShiftOffset
    
    Log.d(TAG, "–ú–µ—Å—è—Ü $monthName: calculated=$calculatedShift, adjusted=$adjustedShift (—Å–¥–≤–∏–≥ -$yearShiftOffset)")
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ adjusted –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
    val safeAdjustedShift = if (adjustedShift < 0 || adjustedShift + daysInMonths[monthIndex] > 36) {
        Log.w(TAG, "–í–ù–ò–ú–ê–ù–ò–ï: $monthName adjusted=$adjustedShift –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã!")
        (adjustedShift % 10 + 10) % 10  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫ 0-9
    } else {
        adjustedShift
    }
    
    // –°–æ–∑–¥–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å safeAdjustedShift...
}
```

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### –í –ª–æ–≥–∞—Ö:

```bash
adb logcat | grep "ScheduleFragment"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –¥–ª—è 2025:**

```
‚ïê‚ïê‚ïê –ì–æ–¥ 2025 - –†–∞—Å—á–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è ‚ïê‚ïê‚ïê
–Ø–Ω–≤–∞—Ä—å: calculated=1, adjusted=1
–°–¥–≤–∏–≥ –≥–æ–¥–∞ (yearShiftOffset): 0
–ú–µ—Å—è—Ü –Ø–Ω–≤–∞—Ä—å: calculated=1, adjusted=1 (—Å–¥–≤–∏–≥ -0)
–ú–µ—Å—è—Ü –§–µ–≤—Ä–∞–ª—å: calculated=2, adjusted=2 (—Å–¥–≤–∏–≥ -0)
–ú–µ—Å—è—Ü –ú–∞—Ä—Ç: calculated=0, adjusted=0 (—Å–¥–≤–∏–≥ -0)
...
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –¥–ª—è 2026:**

```
‚ïê‚ïê‚ïê –ì–æ–¥ 2026 - –†–∞—Å—á–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è ‚ïê‚ïê‚ïê
–Ø–Ω–≤–∞—Ä—å: calculated=6, adjusted=0
–°–¥–≤–∏–≥ –≥–æ–¥–∞ (yearShiftOffset): 6
–ú–µ—Å—è—Ü –Ø–Ω–≤–∞—Ä—å: calculated=6, adjusted=0 (—Å–¥–≤–∏–≥ -6)
–ú–µ—Å—è—Ü –§–µ–≤—Ä–∞–ª—å: calculated=2, adjusted=-4 (—Å–¥–≤–∏–≥ -6)
–í–ù–ò–ú–ê–ù–ò–ï: –§–µ–≤—Ä–∞–ª—å adjusted=-4 –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã!
...
```

### –í–∏–∑—É–∞–ª—å–Ω–æ:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ 2025 –≥–æ–¥:**
   - –Ø–Ω–≤–∞—Ä—å: 1-–µ —á–∏—Å–ª–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ "2" –≤ –≥—Ä–∞—Ñ–∏–∫–µ ‚úÖ
   - –§–µ–≤—Ä–∞–ª—å: 1-–µ —á–∏—Å–ª–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ "4" –≤ –≥—Ä–∞—Ñ–∏–∫–µ ‚úÖ
   - –ú–∞—Ä—Ç: 1-–µ —á–∏—Å–ª–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ "3" –≤ –≥—Ä–∞—Ñ–∏–∫–µ ‚úÖ

2. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ 2026:**
   - –ì—Ä–∞—Ñ–∏–∫ –°–î–í–ò–ù–£–õ–°–Ø (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–æ–π –ø–æ–∑–∏—Ü–∏–∏)
   - –Ø–Ω–≤–∞—Ä—å: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫—É ‚úÖ
   - –§–µ–≤—Ä–∞–ª—å: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫—É ‚úÖ
   - –ú–∞—Ä—Ç: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫—É ‚úÖ

---

## ‚úÖ –ò–¢–û–ì–ò

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ **–ï–¥–∏–Ω—ã–π `yearShiftOffset`** - –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó –¥–ª—è –≤—Å–µ–≥–æ –≥–æ–¥–∞
2. ‚úÖ **–í—Å–µ –º–µ—Å—è—Ü—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–æ—Ä–º—É–ª—É: `adjustedShift = calculatedShift - yearShiftOffset`
3. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** - –µ—Å–ª–∏ `adjustedShift < 0` –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
4. ‚úÖ **–ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω** - —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

- ‚úÖ –Ø–Ω–≤–∞—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
- ‚úÖ **–§–µ–≤—Ä–∞–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –≥—Ä–∞—Ñ–∏–∫–æ–º** üéâ
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Å—è—Ü—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≥–æ–¥–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ —Å–º–µ–Ω –¥–≤–∏–≥–∞–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥–æ–¥–æ–≤

---

## üìÅ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

**–í—Å–µ –æ—Ç—á–µ—Ç—ã:**
1. `SCHEDULE_SHIFT_ADJUSTMENT_BACKUP.md`
2. `BUG_REPORT_YEAR_TRANSITION.md`
3. `FIX_REPORT_DOUBLE_RECURSION.md`
4. `DEBUG_2025_2026_TRANSITION.md`
5. `FINAL_FIX_SHIFT_SYNCHRONIZATION.md`
6. `FINAL_COMPLETE_FIX.md`
7. `CRITICAL_FIX_FEBRUARY_ISSUE.md` ‚≠ê **–≠–¢–û–¢ –û–¢–ß–ï–¢**

---

## üéâ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**APK:** `app/build/outputs/apk/debug/app-debug.apk`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ BUILD SUCCESSFUL

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:**
1. ‚úÖ –î–≤–æ–π–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è
2. ‚úÖ –°–º–µ—à–∏–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
3. ‚úÖ –û—à–∏–±–∫–∞ –≤ `getAdjustedShiftForDisplay`
4. ‚úÖ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥ –≥—Ä–∞—Ñ–∏–∫–∞
5. ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–∞—Å—á–µ—Ç adjustedShift –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞**

**–¢–ï–ü–ï–†–¨ –í–°–ï –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û!** üéâüéâüéâ






